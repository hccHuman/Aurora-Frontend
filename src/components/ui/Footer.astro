---
/**
 * Footer Component
 *
 * Modern footer with legal information displayed in premium modals.
 * Features improved typography, layout, and visual design.
 *
 * @param {string} lang - The current language code (e.g., "es", "en").
 */
const { lang = "es" } = Astro.props;

import { t } from "@/modules/YOLI/injector";
import FooterModalInitializer from "../tsx/Modal/FooterModalInitializer";

// STATIC IMPORTS
import TermsES from "../../content/legal/terms.es.md";
import TermsEN from "../../content/legal/terms.en.md";
import PrivacyES from "../../content/legal/privacy.es.md";
import PrivacyEN from "../../content/legal/privacy.en.md";
import CookiesES from "../../content/legal/cookies.es.md";
import CookiesEN from "../../content/legal/cookies.en.md";

// Select based on language
const TermsComponent = lang === "es" ? TermsES : TermsEN;
const PrivacyComponent = lang === "es" ? PrivacyES : PrivacyEN;
const CookiesComponent = lang === "es" ? CookiesES : CookiesEN;

const text = {
  rights: t("footer.rights", lang),
  terms: t("footer.terms", lang),
  privacy: t("footer.privacy", lang),
  cookies: t("footer.cookies", lang),
};
---

<!-- Hidden content for legal documents -->
<div id="legal-content-terms" class="hidden prose prose-invert max-w-none">
  <TermsComponent />
</div>
<div id="legal-content-privacy" class="hidden prose prose-invert max-w-none">
  <PrivacyComponent />
</div>
<div id="legal-content-cookies" class="hidden prose prose-invert max-w-none">
  <CookiesComponent />
</div>

<footer
  class="w-full bg-slate-950 text-white border-t border-slate-700/50 py-12 transition-colors duration-300"
>
  <div class="max-w-7xl mx-auto px-6">
    <!-- Main Content -->
    <div class="grid grid-cols-1 lg:grid-cols-4 md:grid-cols-2 gap-8 mb-8">
      <!-- Brand Section -->
      <div class="flex flex-col gap-4">
        <h3 class="text-xl font-bold text-slate-100">Lahia Shop</h3>
        <p class="text-slate-400 text-sm leading-relaxed">
          {t("footer.brand_desc", lang)}
        </p>
      </div>

      <div class="flex flex-col gap-4">
        <h3 class="text-xl font-bold text-slate-100">{t("footer.contact_title", lang)}</h3>
        <div itemscope itemtype="http://schema.org/Organization">
          <address class="not-italic text-slate-400 text-sm">
            <span itemprop="name">Lahia Shop</span><br />
            <span itemprop="address">{t("footer.contact_info.address", lang)}</span><br />
            Tel: <a
              href={`tel:${t("footer.contact_info.phone", lang).replace(/\s/g, "")}`}
              itemprop="telephone"
              class="hover:text-red-400">{t("footer.contact_info.phone", lang)}</a
            ><br />
            Email: <a
              href={`mailto:${t("footer.contact_info.email", lang)}`}
              itemprop="email"
              class="hover:text-red-400">{t("footer.contact_info.email", lang)}</a
            >
          </address>
        </div>
      </div>

      <!-- Quick Links -->
      <nav class="flex flex-col gap-4" aria-label={t("footer.aria.nav_quick", lang)}>
        <h4
          class="text-sm font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400"
        >
          {t("footer.quick_links", lang)}
        </h4>
        <div class="flex flex-col gap-2">
          <a
            href={`/${lang}/products/allproducts`}
            class="text-slate-300 hover:text-red-400 transition-colors text-sm"
          >
            {t("header.products", lang)}
          </a>
          <a
            href={`/${lang}/about`}
            class="text-slate-300 hover:text-red-400 transition-colors text-sm"
          >
            {t("about.title", lang)}
          </a>
        </div>
      </nav>

      <!-- Legal Links -->
      <nav class="flex flex-col gap-4" aria-label={t("footer.aria.nav_legal", lang)}>
        <h4 class="text-sm font-semibold uppercase tracking-wider text-slate-400">
          {t("footer.legal", lang)}
        </h4>
        <div class="flex flex-col gap-2">
          <button
            type="button"
            data-modal="terms"
            class="legal-btn text-left text-slate-300 hover:text-red-400 transition-colors text-sm"
            aria-haspopup="dialog"
            aria-controls="legal-content-terms"
          >
            {text.terms}
          </button>
          <button
            type="button"
            data-modal="privacy"
            class="legal-btn text-left text-slate-300 hover:text-red-400 transition-colors text-sm"
            aria-haspopup="dialog"
            aria-controls="legal-content-privacy"
          >
            {text.privacy}
          </button>
          <button
            type="button"
            data-modal="cookies"
            class="legal-btn text-left text-slate-300 hover:text-red-400 transition-colors text-sm"
            aria-haspopup="dialog"
            aria-controls="legal-content-cookies"
          >
            {text.cookies}
          </button>
        </div>
      </nav>
    </div>

    <!-- Footer Bottom -->
    <div
      class="flex flex-col md:flex-row items-center justify-between gap-6 border-t border-slate-700/50 pt-8"
    >
      <div class="order-1 md:order-1">
        <p class="text-slate-400 text-sm">
          © {new Date().getFullYear()} Lahia Shop — {text.rights}
        </p>
      </div>
      <div class="order-2 md:order-2">
        <a
          href="https://www.w3.org/WAI/WCAG2AAA-Conformance"
          title="Explanation of WCAG 2 Level AAA conformance"
          class="hover:opacity-80 transition-opacity block"
          target="_blank"
          rel="noopener noreferrer"
        >
          <img
            height="32"
            width="88"
            src="https://www.w3.org/WAI/WCAG22/wcag2.2AAA"
            alt="Level AAA conformance, W3C WAI Web Content Accessibility Guidelines 2.2"
            class="rounded-sm"
          />
        </a>
      </div>
    </div>
  </div>

  <!-- Legal Modals (React component) - will be populated by FooterModalInitializer -->
  <div id="legal-modals-root"></div>

  <!-- React component to initialize modals - runs on client -->
  <FooterModalInitializer client:load lang={lang} />
</footer>
